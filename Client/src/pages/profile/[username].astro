---
import NavBar from "../../components/Unreactive/NavBar.astro";
import PFP from "../../components/Unreactive/PFP.astro";
import Layout from "../../layouts/layout.astro";
const { username } = Astro.params;

const response = await fetch(import.meta.env.API_URL + "/user/get/" + username).catch(() => null);
if (!response || !response.ok) return Astro.redirect("/");
const data = await response.json().catch(() => null);
if (!data) return Astro.redirect("/");
const user = data.user;
---

<Layout title={{username} + "'s Profile"}>
    <h1>{username}'s Profile</h1>
    <PFP username={username} width=100 height=100/>
    { user.name && <p>Real Name: {user.name}</p> }
    { user.bio && <p>{user.bio}</p>}
</Layout>