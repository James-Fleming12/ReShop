---
const { username, width, height } = Astro.props;

let message: string;
let error: boolean = false;
const response = await fetch(import.meta.env.API_URL + "/user/pfp/" + username).catch(() => null);
if (!response) {
    message = "Server Error"; 
    error = true; 
    return;
}
const data = await response.json().catch(() => null);
if (!data) {
    message = "Error";
    error = true;
    return;
}
const source = data.url;
---

{ error ? message! : <img src = {source} alt="Profile Picture" width={width} height={height}/> } 